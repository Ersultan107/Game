<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ò–≥—Ä–∞ "–ú–∏—Ä –°–ø–æ–∫–æ–π—Å—Ç–≤–∏—è"</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-bg: #1e1e2f;
            --secondary-bg: #282a3c;
            --accent-color: #8be9fd;
            --text-color: #f8f8f2;
            --button-color: #50fa7b;
            --button-hover: #69ffb4;
            --border-radius: 10px;
            --transition-speed: 0.3s ease-in-out;
        }

        body {
            margin: 0;
            background: var(--primary-bg);
            color: var(--text-color);
            font-family: 'Roboto', sans-serif;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            perspective: 1000px; /* –î–ª—è 3D-—ç—Ñ—Ñ–µ–∫—Ç–æ–≤ */
            touch-action: manipulation; /* –î–ª—è –ª—É—á—à–µ–π —Ä–∞–±–æ—Ç—ã –Ω–∞ –º–æ–±–∏–ª–∫–∞—Ö */
            -webkit-tap-highlight-color: transparent; /* –£–±–∏—Ä–∞–µ–º —Å–∏–Ω—é—é –ø–æ–¥—Å–≤–µ—Ç–∫—É –ø—Ä–∏ —Ç–∞–ø–µ */
        }

        #game-container {
            background: var(--secondary-bg);
            border-radius: var(--border-radius);
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            text-align: center;
            transform-style: preserve-3d;
            transition: transform var(--transition-speed);
            max-width: 90%;
            width: 400px;
            box-sizing: border-box;
            position: relative;
            z-index: 1;
        }
        
        #game-container:hover {
            transform: rotateY(5deg) rotateX(5deg);
        }

        h1 {
            color: var(--accent-color);
            margin-bottom: 20px;
            font-size: 2.2em;
            text-shadow: 0 0 10px rgba(139, 233, 253, 0.4);
        }

        p {
            font-size: 1.1em;
            margin-bottom: 25px;
            line-height: 1.6;
        }

        #level-info {
            font-size: 1.3em;
            margin-bottom: 30px;
            color: var(--button-color);
            font-weight: 700;
            text-shadow: 0 0 5px rgba(80, 250, 123, 0.3);
        }

        .game-button {
            background: var(--button-color);
            color: var(--primary-bg);
            border: none;
            border-radius: var(--border-radius);
            padding: 15px 30px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: background var(--transition-speed), transform var(--transition-speed);
            outline: none;
            margin: 10px;
            min-width: 120px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
        }

        .game-button::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            opacity: 0;
            transform: translate(-50%, -50%);
            transition: width 0.4s ease-out, height 0.4s ease-out, opacity 0.4s ease-out;
        }

        .game-button:active::after {
            width: 200%;
            height: 200%;
            opacity: 1;
            transition: 0s;
        }


        .game-button:hover {
            background: var(--button-hover);
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        .game-button:active {
            transform: translateY(0);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        #button-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 20px;
        }

        #screamer-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: black;
            z-index: 9999;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0; /* –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –Ω–µ–≤–∏–¥–∏–º—ã–π */
            transition: opacity 0.1s ease-out; /* –ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ */
        }

        #screamer-overlay.active {
            opacity: 1;
        }

        #screamer-overlay img {
            width: 100%;
            height: 100%;
            object-fit: cover; /* –ó–∞–ø–æ–ª–Ω—è–µ–º –≤–µ—Å—å —ç–∫—Ä–∞–Ω */
            display: block; /* –£–±–∏—Ä–∞–µ–º –ª–∏—à–Ω–∏–µ –æ—Ç—Å—Ç—É–ø—ã */
        }

        /* –ê–Ω–∏–º–∞—Ü–∏—è —Ñ–æ–Ω–∞ –¥–ª—è "–∫—Ä–∞—Å–æ—Ç—ã" */
        .background-dots {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            overflow: hidden;
            z-index: 0;
        }

        .dot {
            position: absolute;
            background: rgba(139, 233, 253, 0.1);
            border-radius: 50%;
            animation: moveDots 20s infinite linear alternate;
        }

        @keyframes moveDots {
            0% { transform: translate(0, 0) scale(1); opacity: 0.2; }
            25% { transform: translate(20vw, 30vh) scale(1.2); opacity: 0.3; }
            50% { transform: translate(50vw, -10vh) scale(0.8); opacity: 0.1; }
            75% { transform: translate(80vw, 40vh) scale(1.5); opacity: 0.4; }
            100% { transform: translate(100vw, 0) scale(1); opacity: 0.2; }
        }

        /* –ê–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ */
        @media (max-width: 600px) {
            #game-container {
                padding: 20px;
                width: 100%;
                border-radius: 0;
            }
            h1 { font-size: 1.8em; }
            p { font-size: 1em; }
            .game-button { padding: 12px 20px; font-size: 1em; margin: 5px; }
            #screamer-overlay { background-color: black; } /* –£–±–µ–¥–∏–º—Å—è, —á—Ç–æ —Ñ–æ–Ω —á—ë—Ä–Ω—ã–π */
        }
    </style>
</head>
<body>

    <div class="background-dots"></div>

    <div id="game-container">
        <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ "–ú–∏—Ä –°–ø–æ–∫–æ–π—Å—Ç–≤–∏—è"!</h1>
        <p id="game-description">–¢–µ–±—è –∂–¥–µ—Ç —Å–µ—Ä–∏—è –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–¥–∞–Ω–∏–π –Ω–∞ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å. –ü—Ä–æ–π–¥–∏ –≤—Å–µ 5 —É—Ä–æ–≤–Ω–µ–π, —á—Ç–æ–±—ã –¥–æ–∫–∞–∑–∞—Ç—å —Å–≤–æ—é –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—é!</p>
        <div id="level-info">–£—Ä–æ–≤–µ–Ω—å: <span id="current-level">1</span>/5</div>
        <div id="button-container">
            </div>
    </div>

    <div id="screamer-overlay">
        <img src="screamer.jpg" alt="–°—é—Ä–ø—Ä–∏–∑!"> 
    </div>

    <audio id="scream-audio" src="scream.mp3" preload="auto"></audio>

    <script>
        let currentLevel = 1;
        const totalLevels = 5;
        const levelInfo = document.getElementById('current-level');
        const buttonContainer = document.getElementById('button-container');
        const gameDescription = document.getElementById('game-description');
        const screamerOverlay = document.getElementById('screamer-overlay');
        const screamAudio = document.getElementById('scream-audio');

        const initialDescriptions = [
            "–ù–∞–π–¥–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–∏–º–≤–æ–ª, —á—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –¥–∞–ª—å—à–µ. –≠—Ç–æ –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ!",
            "–û—Ç–ª–∏—á–Ω–æ! –¢–µ–ø–µ—Ä—å –±—É–¥—å —á—É—Ç—å –±—ã—Å—Ç—Ä–µ–µ. –°–∏–º–≤–æ–ª –º–µ–Ω—è–µ—Ç—Å—è –±—ã—Å—Ç—Ä–µ–µ!",
            "–ü—Ä–æ–¥–æ–ª–∂–∞–π –≤ —Ç–æ–º –∂–µ –¥—É—Ö–µ! –ö–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è ‚Äî –∫–ª—é—á –∫ —É—Å–ø–µ—Ö—É!",
            "–ü–æ—á—Ç–∏ —Ñ–∏–Ω–∞–ª! –ü–æ—Å–ª–µ–¥–Ω–∏–π —Ä—ã–≤–æ–∫!",
            "–≠—Ç–æ –ø–æ—Å–ª–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å! –í–Ω–∏–º–∞–Ω–∏–µ: —Å–∏–º–≤–æ–ª –ø–æ—è–≤–∏—Ç—Å—è –≤—Å–µ–≥–æ –Ω–∞ –º–≥–Ω–æ–≤–µ–Ω–∏–µ. –£–¥–∞—á–∏!"
        ];

        const symbols = ['üü¢', 'üîµ', 'üî¥', 'üü°', 'üü£']; // –ò—Å–ø–æ–ª—å–∑—É–µ–º —ç–º–æ–¥–∑–∏ –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã

        function createDots() {
            const numDots = 15;
            const bgDots = document.querySelector('.background-dots');
            for (let i = 0; i < numDots; i++) {
                const dot = document.createElement('div');
                dot.classList.add('dot');
                dot.style.width = `${Math.random() * 50 + 20}px`;
                dot.style.height = dot.style.width;
                dot.style.left = `${Math.random() * 100}vw`;
                dot.style.top = `${Math.random() * 100}vh`;
                dot.style.animationDelay = `${Math.random() * 20}s`;
                bgDots.appendChild(dot);
            }
        }
        createDots();

        function generateButtons(correctIndex) {
            buttonContainer.innerHTML = '';
            const numButtons = currentLevel < 5 ? 3 : 1; // 3 –∫–Ω–æ–ø–∫–∏ –¥–ª—è 1-4, 1 –∫–Ω–æ–ø–∫–∞ –¥–ª—è 5
            const shuffledSymbols = shuffleArray([...symbols]);

            for (let i = 0; i < numButtons; i++) {
                const button = document.createElement('button');
                button.classList.add('game-button');
                button.textContent = shuffledSymbols[i];
                button.dataset.index = shuffledSymbols.indexOf(symbols[correctIndex]); // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∫–∞–∫–æ–π —Å–∏–º–≤–æ–ª –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
                
                if (shuffledSymbols[i] === symbols[correctIndex]) {
                    button.onclick = handleCorrectClick;
                } else {
                    button.onclick = handleIncorrectClick; // –ü—Ä–æ—Å—Ç–æ –¥–ª—è –≤–∏–¥–∞, –Ω–µ –Ω–∞–∫–∞–∑—ã–≤–∞–µ–º
                }
                buttonContainer.appendChild(button);
            }

            if (currentLevel === 5) {
                // –ù–∞ 5 —É—Ä–æ–≤–Ω–µ –¥–µ–ª–∞–µ–º –∫–Ω–æ–ø–∫—É –º–∞–ª–µ–Ω—å–∫–æ–π –∏ –≤ —Ü–µ–Ω—Ç—Ä–µ
                const finalButton = document.querySelector('.game-button');
                finalButton.style.width = '70px';
                finalButton.style.height = '70px';
                finalButton.style.borderRadius = '50%';
                finalButton.style.fontSize = '1.8em';
                finalButton.style.margin = 'auto'; // –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º
                finalButton.textContent = '‚úÖ'; // –ò–∫–æ–Ω–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
                gameDescription.textContent = "–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –¢—ã –≥–æ—Ç–æ–≤ –Ω–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è. –ë—É–¥—å –≤–Ω–∏–º–∞—Ç–µ–ª–µ–Ω!";
            }
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function handleCorrectClick() {
            if (currentLevel < totalLevels) {
                currentLevel++;
                levelInfo.textContent = currentLevel;
                gameDescription.textContent = initialDescriptions[currentLevel - 1];
                nextLevel();
            } else {
                // –≠—Ç–æ –ø–æ—Å–ª–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å, –∞–∫—Ç–∏–≤–∏—Ä—É–µ–º —Å–∫—Ä–∏–º–µ—Ä!
                activateScreamer();
            }
        }

        function handleIncorrectClick() {
            // –í —ç—Ç–æ–π "–¥—Ä—É–∂–µ–ª—é–±–Ω–æ–π" –∏–≥—Ä–µ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–ª–∏–∫–∏ –Ω–µ –Ω–∞–∫–∞–∑—ã–≤–∞—é—Ç—Å—è
            // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª–µ–≥–∫—É—é –≤–∏–±—Ä–∞—Ü–∏—é –∏–ª–∏ "–ù–µ–≤–µ—Ä–Ω–æ, –ø–æ–ø—Ä–æ–±—É–π –µ—â–µ!"
            // –î–ª—è –Ω–∞—à–∏—Ö —Ü–µ–ª–µ–π, –ø—Ä–æ—Å—Ç–æ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º
            console.log("–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ, –Ω–æ —ç—Ç–æ –Ω–µ —Å—Ç—Ä–∞—à–Ω–æ! :)");
        }

        function nextLevel() {
            const correctSymbolIndex = Math.floor(Math.random() * symbols.length);
            generateButtons(correctSymbolIndex);

            // –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è 5 —É—Ä–æ–≤–Ω—è, —á—Ç–æ–±—ã –∫–Ω–æ–ø–∫–∞ –ø–æ—è–≤–ª—è–ª–∞—Å—å —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π
            if (currentLevel === 5) {
                buttonContainer.style.opacity = '0';
                setTimeout(() => {
                    buttonContainer.style.transition = 'opacity 0.8s ease-in-out';
                    buttonContainer.style.opacity = '1';
                }, 1000); // –ü–æ—è–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É
            }
        }

        function activateScreamer() {
            // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—Å–µ —Ñ–æ–Ω–æ–≤—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –∏ –∑–≤—É–∫–∏
            document.body.style.overflow = 'hidden';
            document.getElementById('game-container').style.display = 'none';

            // –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ –∞—É–¥–∏–æ –≥–æ—Ç–æ–≤–æ –∫ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—é
            screamAudio.currentTime = 0; // –ù–∞—á–∏–Ω–∞–µ–º —Å –Ω–∞—á–∞–ª–∞
            screamAudio.volume = 1.0; // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≥—Ä–æ–º–∫–æ—Å—Ç—å

            // –í–∏–±—Ä–∞—Ü–∏—è (—Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Android)
            if (navigator.vibrate) navigator.vibrate([200, 100, 200, 100, 500]); // –î–ª–∏–Ω–Ω–∞—è –≤–∏–±—Ä–∞—Ü–∏—è

            screamerOverlay.style.display = 'flex'; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–≤–µ—Ä–ª–µ–π
            // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ opacity-transition
            setTimeout(() => { screamerOverlay.classList.add('active'); }, 10); 
            
            screamAudio.play().catch(e => {
                console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–∏ –∑–≤—É–∫–∞:", e);
                // –ù–∞ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö iOS —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö –∑–≤—É–∫ –º–æ–∂–µ—Ç –Ω–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏—Å—å –±–µ–∑ –ø—Ä—è–º–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
                // –ù–æ —Ç–∞–∫ –∫–∞–∫ —ç—Ç–æ "–∏–≥—Ä–∞", –∫–ª–∏–∫–∏ –±—ã–ª–∏, –¥–æ–ª–∂–Ω–æ —Å—Ä–∞–±–æ—Ç–∞—Ç—å.
            });

            // –ó–∞–ø—Ä–æ—Å –Ω–∞ –ø–æ–ª–Ω—ã–π —ç–∫—Ä–∞–Ω –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞
            if (document.documentElement.requestFullscreen) {
                document.documentElement.requestFullscreen();
            } else if (document.documentElement.webkitRequestFullscreen) { /* Safari */
                document.documentElement.webkitRequestFullscreen();
            } else if (document.documentElement.msRequestFullscreen) { /* IE11 */
                document.documentElement.msRequestFullscreen();
            }
        }
        
        // –ü—Ä–µ–≤–µ–Ω—Ç–∏–≤–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∞—É–¥–∏–æ, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –∑–∞–¥–µ—Ä–∂–∫–∏
        window.addEventListener('load', () => {
            screamAudio.load();
            // –ü–æ–ø—ã—Ç–∫–∞ "—Ä–∞–∑–±—É–¥–∏—Ç—å" –∞—É–¥–∏–æ-–∫–æ–Ω—Ç–µ–∫—Å—Ç –Ω–∞ iOS, –µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ, —á–µ—Ä–µ–∑ –Ω–µ–º–æ–π –∑–≤—É–∫
            const silentAudio = new Audio();
            silentAudio.src = 'data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADGgAAA' + 
                              'kAAf/uBgAAADFFTEFZRVJWaWRlbyBTb2Z0d2FyZQAAAAFlLMPAAADhAAAACmlDM1kAAAA' + 
                              '2AAAAA0gAAADhEAAAAAAAAMyMEQwAAASgAAAADgG5mMHIAAAAMQAAABQAAEAAAMyMEQw' + 
                              'AAASgAAAADgAAAABQAAB9FAAB24Cg+L+bQAAAACc3JjAAAAAAAAABAAAANuMDMgAAAAAAAA' + 
                              'AAADMAAAAEQAAB4gAACDgAAJ+BAAAC/wAAEEiAAAKdAAAEP2AAALfQAAGJAAAAYYAACHQA' + 
                              'AA/kAAAHNAAACjAAAAnBAAAE9wAAAQAAAAAAAQ=='; // silent mp3 data URI
            silentAudio.play().catch(e => {}); // –ü—ã—Ç–∞–µ–º—Å—è –ø—Ä–æ–∏–≥—Ä–∞—Ç—å, –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º –æ—à–∏–±–∫–∏
        });


        // –ù–∞—á–∏–Ω–∞–µ–º –∏–≥—Ä—É
        nextLevel();

    </script>

</body>
</html>